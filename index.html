<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TikTok Downloader</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#0f0f0f;
  color:#fff;
  display:flex;
  justify-content:center;
}
.container{
  width:100%;
  max-width:420px;
  padding:15px;
}
.input-group{
  display:flex;
  gap:6px;
}
input{
  flex:1;
  padding:10px;
  border-radius:6px;
  border:none;
}
button{
  padding:10px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.clear-btn{background:#ff4d4d;color:#fff;}
.paste-btn{background:#1da1f2;color:#fff;}

#loader{
  display:none;
  margin:15px 0;
  text-align:center;
}

#video-info{
  display:none;
  margin-top:15px;
}
.profile-section{
  display:flex;
  gap:10px;
  align-items:center;
}
#user-logo{
  width:50px;
  height:50px;
  border-radius:50%;
}

#quality-list{
  display:none;
  margin-top:15px;
}
.q-btn{
  width:100%;
  margin-top:8px;
  font-size:15px;
}
.hd-btn{background:#00e676;}
.sd-btn{background:#ffb300;}
.mp3-btn{background:#ab47bc;}

.creator, .contact-box{
  text-align:center;
  margin-top:15px;
  font-size:13px;
}
a{color:#1da1f2;text-decoration:none;}
</style>
</head>

<body>
<div class="container">

  <div class="input-group">
    <input type="text" id="videoUrl" placeholder="Paste TikTok link here..." oninput="handleAutoProcess()">
    <button class="clear-btn" onclick="clearInput()">âœ•</button>
    <button class="paste-btn" onclick="pasteText()">Paste</button>
  </div>

  <div id="loader">ðŸ”„ Processing Video...</div>

  <div id="video-info">
    <div class="profile-section">
      <img id="user-logo">
      <div>
        <h4 id="user-name"></h4>
        <p id="video-desc"></p>
      </div>
    </div>
  </div>

  <div id="quality-list">
    <div id="status-text"></div>
    <button class="q-btn hd-btn" id="hdBtn">Download HD Video</button>
    <button class="q-btn sd-btn" id="sdBtn">Download Normal Video</button>
    <button class="q-btn mp3-btn" id="mp3Btn">Download MP3 Audio</button>
  </div>

  <div class="creator">Created by GX Sammim</div>
  <div class="contact-box">
    <a href="https://t.me/sammim14" target="_blank">Telegram</a> |
    <a href="https://www.facebook.com/share/1SD3SzGTyj/" target="_blank">Facebook</a>
  </div>

</div>

<script>
let hdUrl="", sdUrl="", mp3Url="";

async function handleAutoProcess(){
  const url=document.getElementById("videoUrl").value.trim();
  if(!url.includes("tiktok.com")) return;

  document.getElementById("loader").style.display="block";

  try{
    const res=await fetch("https://tikwm.com/api/?url="+encodeURIComponent(url));
    const json=await res.json();

    if(json.code!==0){
      document.getElementById("loader").style.display="none";
      return;
    }

    const v=json.data;

    document.getElementById("video-info").style.display="block";
    document.getElementById("user-logo").src=v.author.avatar;
    document.getElementById("user-name").innerText=v.author.nickname;
    document.getElementById("video-desc").innerText=v.title;

    sdUrl=v.play;
    hdUrl=v.hdplay;
    mp3Url=v.music;

    document.getElementById("quality-list").style.display="block";
    document.getElementById("status-text").innerText="Select quality ðŸ‘‡";

  }catch(e){
    alert("Error loading video");
  }

  document.getElementById("loader").style.display="none";
}

hdBtn.onclick=()=>hdUrl && window.open(hdUrl,"_blank");
sdBtn.onclick=()=>sdUrl && window.open(sdUrl,"_blank");
mp3Btn.onclick=()=>mp3Url && window.open(mp3Url,"_blank");

function clearInput(){
  videoUrl.value="";
  video-info?.style?.display==="none";
  quality-list?.style?.display==="none";
}

async function pasteText(){
  const t=await navigator.clipboard.readText();
  videoUrl.value=t;
  handleAutoProcess();
}
</script>

</body>
</html>
