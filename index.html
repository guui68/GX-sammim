<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XG Sammim TikTok Downloader Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; padding: 0; font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #1a0a2e 0%, #4a00e0 100%); color: white; text-align: center; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .container { background: rgba(255, 255, 255, 0.08); border-radius: 20px; padding: 25px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); max-width: 450px; width: 92%; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.15); }
        h1 { font-size: 26px; margin-bottom: 20px; font-weight: 700; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        
        .input-group { display: flex; background: white; border-radius: 12px; overflow: hidden; margin-bottom: 15px; position: relative; }
        input[type="text"] { flex: 1; padding: 15px 45px 15px 15px; border: none; font-size: 15px; outline: none; color: #333; }
        
        .clear-btn { position: absolute; right: 80px; top: 50%; transform: translateY(-50%); background: #ddd; color: #333; border-radius: 50%; width: 22px; height: 22px; display: none; align-items: center; justify-content: center; cursor: pointer; font-size: 10px; border: none; }
        .paste-btn { padding: 0 15px; background: #7c4dff; color: white; border: none; font-weight: 700; cursor: pointer; transition: 0.2s; }
        .paste-btn:active { background: #5e35b1; }

        #loader { display: none; margin-top: 10px; color: #64dd17; font-weight: bold; font-size: 14px; }

        #video-info { margin-top: 15px; display: none; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 12px; text-align: left; animation: fadeIn 0.5s ease; }
        .profile-section { display: flex; align-items: center; gap: 12px; }
        #user-logo { width: 50px; height: 50px; border-radius: 50%; border: 2px solid #64dd17; object-fit: cover; }
        .user-details h4 { margin: 0; color: #64dd17; font-size: 15px; }
        .user-details p { margin: 2px 0 0; font-size: 12px; opacity: 0.8; line-height: 1.3; }

        #quality-list { margin-top: 15px; display: none; animation: fadeIn 0.5s ease; }
        .q-btn { display: block; width: 100%; margin: 8px 0; padding: 12px; color: white; font-weight: 600; border-radius: 10px; font-size: 15px; border: none; cursor: pointer; transition: 0.3s; position: relative; overflow: hidden; }
        .q-btn:disabled { opacity: 0.7; cursor: not-allowed; }
        
        .hd-btn { background: #ff9800; }
        .sd-btn { background: #2196f3; }
        .mp3-btn { background: #f44336; }
        
        #status-text { margin-top: 10px; font-size: 13px; color: #ffeb3b; font-weight: bold; min-height: 20px; }

        .creator { margin-top: 25px; font-size: 14px; opacity: 0.7; }
        .contact-box { margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 12px; }
        .contact-box a { margin: 0 10px; color: #fff; text-decoration: none; font-weight: bold; font-size: 14px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <h1>TikTok Downloader</h1>
    
    <div class="input-group">
        <input type="text" id="videoUrl" placeholder="Paste TikTok link here..." oninput="handleAutoProcess()">
        <button class="clear-btn" id="clearBtn" onclick="clearInput()">‚úï</button>
        <button class="paste-btn" onclick="pasteText()">Paste</button>
    </div>

    <div id="loader">üîÑ Initializing...</div>

    <div id="video-info">
        <div class="profile-section">
            <img id="user-logo" src="" alt="User Logo">
            <div class="user-details">
                <h4 id="user-name"></h4>
                <p id="video-desc"></p>
            </div>
        </div>
    </div>

    <div id="quality-list">
        <div id="status-text"></div>
        <button class="q-btn hd-btn" id="hdBtn">Download HD Video</button>
        <button class="q-btn sd-btn" id="sdBtn">Download Normal Video</button>
        <button class="q-btn mp3-btn" id="mp3Btn">Download MP3 Audio</button>
    </div>

    <div class="creator">Created by GX Sammim</div>
    <div class="contact-box">
        <a href="https://t.me/sammim14" target="_blank">Telegram</a> | 
        <a href="https://www.facebook.com/share/1SD3SzGTyj/" target="_blank">Facebook</a>
    </div>
</div>

<script>
    // ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶¨‡¶ï‡ßç‡¶∏‡ßá‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤
    function toggleClearBtn() {
        const input = document.getElementById("videoUrl");
        const clearBtn = document.getElementById("clearBtn");
        clearBtn.style.display = input.value.length > 0 ? "flex" : "none";
    }

    function clearInput() {
        document.getElementById("videoUrl").value = "";
        document.getElementById("quality-list").style.display = "none";
        document.getElementById("video-info").style.display = "none";
        document.getElementById("loader").style.display = "none";
        toggleClearBtn();
    }

    function handleAutoProcess() {
        const url = document.getElementById("videoUrl").value;
        toggleClearBtn();
        if (url.includes("tiktok.com")) {
            getVideoData(url);
        }
    }

    function pasteText() {
        navigator.clipboard.readText().then(text => {
            document.getElementById("videoUrl").value = text;
            handleAutoProcess();
        }).catch(err => {
            alert("Please allow clipboard permission!");
        });
    }

    // ‡¶™‡¶æ‡¶ì‡ßü‡¶æ‡¶∞‡¶´‡ßÅ‡¶≤ ‡¶è‡¶™‡¶ø‡¶Ü‡¶á ‡¶´‡¶≤‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ
    async function getVideoData(urlInput) {
        const loader = document.getElementById("loader");
        const videoInfo = document.getElementById("video-info");
        const qualityList = document.getElementById("quality-list");
        
        videoInfo.style.display = "none";
        qualityList.style.display = "none";
        loader.style.display = "block";

        // ‡ß©‡¶ü‡¶ø ‡¶∂‡¶ï‡ßç‡¶§‡¶ø‡¶∂‡¶æ‡¶≤‡ßÄ ‡¶è‡¶™‡¶ø‡¶Ü‡¶á ‡¶∏‡ßã‡¶∞‡ßç‡¶∏
        const apis = [
            { name: "Server 1", url: `https://tikwm.com/api/?url=${encodeURIComponent(urlInput)}` },
            { name: "Server 2", url: `https://api.tiklydown.eu.org/api/download?url=${encodeURIComponent(urlInput)}` },
            { name: "Server 3", url: `https://www.tikwm.com/api/?url=${encodeURIComponent(urlInput)}` }
        ];

        let foundData = null;

        for (let i = 0; i < apis.length; i++) {
            try {
                loader.innerText = `üîÑ Connection: ${apis[i].name}...`;
                const response = await fetch(apis[i].url);
                const result = await response.json();
                
                const data = result.data || result;

                if (data && (data.play || data.video || data.url)) {
                    foundData = data;
                    break; 
                }
            } catch (err) {
                console.warn(`${apis[i].name} failed, trying next...`);
            }
        }

        if (foundData) {
            // ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞‡¶ø‡¶Ç
            document.getElementById("user-logo").src = foundData.author?.avatar || foundData.author?.avatar_thumb?.url_list?.[0] || "https://www.w3schools.com/howto/img_avatar.png";
            document.getElementById("user-name").innerText = "@" + (foundData.author?.nickname || foundData.author?.unique_id || "TikTok User");
            document.getElementById("video-desc").innerText = (foundData.title || "TikTok Video By Sammim").substring(0, 60) + "...";

            // ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™‡¶ø‡¶Ç
            const hdLink = foundData.hdplay || foundData.video?.no_watermark_hd || foundData.play;
            const sdLink = foundData.play || foundData.video?.no_watermark || foundData.play;
            const musicLink = foundData.music || foundData.music_info?.play_url || foundData.music;

            setupDownload(document.getElementById("hdBtn"), hdLink, "GX_Sammim_HD.mp4");
            setupDownload(document.getElementById("sdBtn"), sdLink, "GX_Sammim_SD.mp4");
            setupDownload(document.getElementById("mp3Btn"), musicLink, "GX_Sammim_Music.mp3");

            loader.style.display = "none";
            videoInfo.style.display = "block";
            qualityList.style.display = "block";
        } else {
            loader.innerHTML = "<span style='color: #ff5252;'>‚ùå All servers busy. Try again later.</span>";
        }
    }

    // ‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞-‡¶´‡¶æ‡¶∏‡ßç‡¶ü ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶Æ‡ßá‡¶ï‡¶æ‡¶®‡¶ø‡¶ú‡¶Æ
    async function setupDownload(btn, fileUrl, fileName) {
        btn.onclick = async function() {
            if (!fileUrl) return alert("Download link not available!");
            
            const status = document.getElementById("status-text");
            const originalText = btn.innerText;
            
            btn.innerText = "üì• Downloading...";
            btn.disabled = true;
            status.innerText = "‚ö° Fetching from server... fast!";

            try {
                // ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ü‡ßç‡¶∞‡¶ø‡¶ó‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø Fetch API
                const response = await fetch(fileUrl);
                if (!response.ok) throw new Error("Fast fetch failed");
                
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = fileName;
                document.body.appendChild(a);
                a.click();
                
                // ‡¶ï‡ßç‡¶≤‡¶ø‡¶®‡¶Ü‡¶™
                setTimeout(() => {
                    window.URL.revokeObjectURL(url);
                    document.body.removeChild(a);
                }, 100);

                status.innerText = "‚úÖ Download Complete!";
            } catch (e) {
                // ‡¶Ø‡¶¶‡¶ø Fetch ‡¶ï‡¶æ‡¶ú ‡¶®‡¶æ ‡¶ï‡¶∞‡ßá, ‡¶§‡¶¨‡ßá ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡ßá ‡¶™‡¶æ‡¶†‡¶ø‡ßü‡ßá ‡¶¶‡¶ø‡¶¨‡ßá (‡¶¨‡¶ø‡¶ï‡¶≤‡ßç‡¶™ ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø)
                window.location.href = fileUrl;
                status.innerText = "üöÄ Redirecting to Direct Link...";
            } finally {
                setTimeout(() => {
                    btn.innerText = originalText;
                    btn.disabled = false;
                    status.innerText = "";
                }, 3000);
            }
        };
    }
</script>

</body>
</html>
