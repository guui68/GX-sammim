<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XG Sammim TikTok Downloader</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; }
        body { 
            margin: 0; padding: 0; 
            font-family: 'Outfit', sans-serif; 
            background: #0f172a; 
            background: radial-gradient(circle at top right, #1e293b, #0f172a);
            color: white; min-height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        .container { 
            width: 92%; max-width: 420px; 
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px; padding: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            text-align: center;
        }

        h1 { font-weight: 800; font-size: 24px; margin-bottom: 25px; color: #38bdf8; }

        .input-group {
            background: #f8fafc; border-radius: 16px;
            display: flex; padding: 6px; margin-bottom: 15px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        input[type="text"] {
            flex: 1; border: none; background: transparent;
            padding: 12px 15px; font-size: 15px; outline: none; color: #1e293b;
        }

        .paste-btn {
            background: #38bdf8; color: white; border: none;
            padding: 0 18px; border-radius: 12px; font-weight: 600; cursor: pointer;
        }

        .fetch-btn {
            width: 100%; padding: 16px; background: #10b981;
            color: white; border: none; border-radius: 16px;
            font-weight: 700; font-size: 16px; cursor: pointer;
            transition: 0.3s; margin-bottom: 10px;
        }
        .fetch-btn:active { transform: scale(0.98); }

        /* Video Info Card */
        #video-info {
            display: none; margin-top: 20px; padding: 15px;
            background: rgba(255,255,255,0.05); border-radius: 20px;
            text-align: left; animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .profile-box { display: flex; align-items: center; gap: 12px; margin-bottom: 15px; }
        #user-logo { width: 45px; height: 45px; border-radius: 50%; border: 2px solid #38bdf8; }
        .user-details h4 { margin: 0; font-size: 15px; color: #38bdf8; }
        .user-details p { margin: 2px 0 0; font-size: 12px; opacity: 0.7; }

        /* ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶¨‡¶æ‡¶ü‡¶® */
        .dl-grid { display: grid; grid-template-columns: 1fr; gap: 10px; }
        .q-btn {
            padding: 14px; border: none; border-radius: 12px;
            font-weight: 700; font-size: 14px; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 8px;
            transition: 0.2s; color: white;
        }
        .video-btn { background: #6366f1; }
        .audio-btn { background: #ec4899; }
        .q-btn:disabled { opacity: 0.6; cursor: not-allowed; }

        /* ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç ‡¶¨‡¶ï‡ßç‡¶∏ */
        #process-box {
            display: none; margin-top: 20px;
            background: #1e293b; border: 1px solid #38bdf8;
            padding: 15px; border-radius: 16px;
        }
        .loader-bar {
            height: 6px; background: #0f172a; border-radius: 10px;
            margin-top: 10px; overflow: hidden;
        }
        .loader-fill {
            height: 100%; width: 0%; background: #38bdf8;
            box-shadow: 0 0 10px #38bdf8; transition: width 0.3s;
        }

        #status-text { margin-top: 10px; font-size: 13px; font-weight: 600; color: #fbbf24; }

        .footer { margin-top: 30px; font-size: 13px; opacity: 0.5; }
        .footer a { color: #38bdf8; text-decoration: none; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>TikTok Downloader</h1>

    <div class="input-group">
        <input type="text" id="videoUrl" placeholder="Paste link here...">
        <button class="paste-btn" onclick="pasteText()">Paste</button>
    </div>

    <button class="fetch-btn" id="mainBtn" onclick="startProcess()">Check Video</button>

    <div id="status-text"></div>

    <div id="video-info">
        <div class="profile-box">
            <img id="user-logo" src="" alt="">
            <div class="user-details">
                <h4 id="user-name"></h4>
                <p id="video-desc"></p>
            </div>
        </div>
        <div class="dl-grid">
            <button class="q-btn video-btn" id="hdBtn">üì• Download No Watermark</button>
            <button class="q-btn audio-btn" id="mp3Btn">üéµ Download Audio MP3</button>
        </div>
    </div>

    <div id="process-box">
        <div id="process-label" style="font-size: 14px; font-weight: 600;">Processing File...</div>
        <div class="loader-bar"><div class="loader-fill" id="loader-fill"></div></div>
    </div>

    <div class="footer">
        Created by <b>GX Sammim</b><br><br>
        <a href="https://t.me/sammim14" target="_blank">Telegram</a> ‚Ä¢ 
        <a href="https://www.facebook.com/share/1SD3SzGTyj/" target="_blank">Facebook</a>
    </div>
</div>

<script>
    // ‡¶ï‡ßç‡¶≤‡¶ø‡¶™‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡ßá‡¶∏‡ßç‡¶ü
    async function pasteText() {
        try {
            const text = await navigator.clipboard.readText();
            document.getElementById("videoUrl").value = text;
        } catch (err) {}
    }

    // ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶á‡¶â‡¶Ü‡¶á ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶§‡ßá ‡¶¨‡¶æ‡¶∞‡¶¨‡¶æ‡¶∞ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü
    function resetUI() {
        document.getElementById("video-info").style.display = "none";
        document.getElementById("process-box").style.display = "none";
        document.getElementById("status-text").innerText = "";
        document.getElementById("loader-fill").style.width = "0%";
    }

    function startProcess() {
        const url = document.getElementById("videoUrl").value.trim();
        if (!url.includes("tiktok.com")) {
            document.getElementById("status-text").innerText = "‚ùå Invalid TikTok Link!";
            return;
        }
        getVideoData(url);
    }

    async function getVideoData(urlInput) {
        resetUI();
        const status = document.getElementById("status-text");
        status.innerText = "üîÑ Finding video content...";

        try {
            const res = await fetch(`https://tikwm.com/api/?url=${encodeURIComponent(urlInput)}`);
            const json = await res.json();
            
            if (json.data) {
                status.innerText = "‚úÖ Video Found!";
                displayData(json.data);
            } else {
                status.innerText = "‚ùå Video not found. Try another link.";
            }
        } catch (e) {
            status.innerText = "‚ùå Server Error. Please try again.";
        }
    }

    function displayData(data) {
        document.getElementById("user-logo").src = data.author.avatar;
        document.getElementById("user-name").innerText = "@" + data.author.nickname;
        document.getElementById("video-desc").innerText = data.title || "TikTok Video";
        
        // ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™
        setupDownload(document.getElementById("hdBtn"), data.play, "TikTok_Video.mp4");
        setupDownload(document.getElementById("mp3Btn"), data.music, "TikTok_Audio.mp3");

        document.getElementById("video-info").style.display = "block";
    }

    async function setupDownload(btn, fileUrl, fileName) {
        btn.onclick = async function() {
            const pBox = document.getElementById("process-box");
            const pFill = document.getElementById("loader-fill");
            const pLabel = document.getElementById("process-label");
            
            btn.disabled = true;
            pBox.style.display = "block";
            pLabel.innerText = "üì• Downloading to server...";
            
            // ‡¶´‡ßá‡¶ï ‡¶™‡ßç‡¶∞‡¶ó‡ßç‡¶∞‡ßá‡¶∏ ‡¶è‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶®
            let w = 0;
            let iv = setInterval(() => {
                if(w < 90) { w += 10; pFill.style.width = w + "%"; }
            }, 150);

            try {
                const response = await fetch(fileUrl);
                const blob = await response.blob();
                
                clearInterval(iv);
                pFill.style.width = "100%";
                pLabel.innerText = "‚úÖ Saving to device...";

                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url; a.download = fileName;
                document.body.appendChild(a);
                a.click();
                window.URL.revokeObjectURL(url);
                
                setTimeout(() => {
                    pBox.style.display = "none";
                    btn.disabled = false;
                }, 2000);
            } catch (e) {
                window.open(fileUrl, '_blank');
                pBox.style.display = "none";
                btn.disabled = false;
            }
        };
    }
</script>
</body>
</html>
